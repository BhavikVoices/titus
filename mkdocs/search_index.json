{
    "docs": [
        {
            "location": "/", 
            "text": "Titus", 
            "title": "Introduction"
        }, 
        {
            "location": "/#titus", 
            "text": "", 
            "title": "Titus"
        }, 
        {
            "location": "/build/", 
            "text": "Agent\n\n\nmkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-agent.git\ncd titus-agent\nmake build\n./gradlew clean buildDeb\n\n\n\n\nVPC Driver\n\n\nmkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-vpc-driver.git\ncd titus-vpc-driver\ngo build\n./gradlew clean buildDeb\n\n\n\n\nMetadata Service\n\n\nmkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-metadata-service.git\ncd titus-metadata-service\nmake build\n./gradlew clean buildDeb\n\n\n\n\nThis will produce product three deb files under build/distributions", 
            "title": "Building the Code"
        }, 
        {
            "location": "/build/#agent", 
            "text": "mkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-agent.git\ncd titus-agent\nmake build\n./gradlew clean buildDeb", 
            "title": "Agent"
        }, 
        {
            "location": "/build/#vpc-driver", 
            "text": "mkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-vpc-driver.git\ncd titus-vpc-driver\ngo build\n./gradlew clean buildDeb", 
            "title": "VPC Driver"
        }, 
        {
            "location": "/build/#metadata-service", 
            "text": "mkdir -p $GOPATH/src/github.com/Netflix\ncd $GOPATH/src/github.com/Netflix\ngit clone https://github.com/Netflix/titus-metadata-service.git\ncd titus-metadata-service\nmake build\n./gradlew clean buildDeb  This will produce product three deb files under build/distributions", 
            "title": "Metadata Service"
        }, 
        {
            "location": "/install/prereqs/", 
            "text": "Required\n\n\nLinux\n\n\nWe currently run our agents on Ubuntu Xenial (16.04.2) with kernel 4.9.34 with\npatches for EFS. Until Titus open source supports EFS, it is likely that Xenial\nand a 4.9 kernel is sufficient.\n\n\nWe run all other tiers of Titus on Trusty.\n\n\nMesos and Zookeeper\n\n\n\n\nZookeeper 3.4.8 (with Exhibitor 1.5.5)\n\n\nMesos 1.0.1\n\n\n\n\nLinks\n- IPOFMESOS:5050\n- IPOFMESOS:5050/slaves\n\n\nSpinnaker\n\n\nWe deploy Titus via Spinnaker to an EC2 cloud provider. Eventually we may\nrelease these pipelines, but for now we suggest direct deployments using\nthe AWS EC2 console.\n\n\nDocker Registry\n\n\nWe operate a docker registry based on Docker Distribution. We have tested with\nDockerhub and suggest this or the EC2 Container Registry Service (ECR).\n\n\nAWS Configuration\n\n\n\n\nIAM Role and security group for Titus\n\n\nTODO: specify what is required, for now tested with wide open security group\n  and \n*\n IAM role. \n\n\nIAM Role and security group for app container\n\n\nTODO: Need to specify a test sec group and IAM role\n\n\n\n\nOptional\n\n\nWe use Cassandra as our persistence store for Titus master. For OSS, we\ncurrent suggest the in-memory store.\n\n\nWe have integration with Eureka to disable agents and monitor health. For now,\nthis is not part of the OSS implementation.\n\n\nWe write all task state updates to Elastic Search for operational insight. For\nnow, this is not part of the OSS implementation.\n\n\nWe use Edda to understand which ASG's are available in Titus. For now, this is\nnot part of the OSS implementation.", 
            "title": "Prereqs"
        }, 
        {
            "location": "/install/prereqs/#required", 
            "text": "", 
            "title": "Required"
        }, 
        {
            "location": "/install/prereqs/#linux", 
            "text": "We currently run our agents on Ubuntu Xenial (16.04.2) with kernel 4.9.34 with\npatches for EFS. Until Titus open source supports EFS, it is likely that Xenial\nand a 4.9 kernel is sufficient.  We run all other tiers of Titus on Trusty.", 
            "title": "Linux"
        }, 
        {
            "location": "/install/prereqs/#mesos-and-zookeeper", 
            "text": "Zookeeper 3.4.8 (with Exhibitor 1.5.5)  Mesos 1.0.1   Links\n- IPOFMESOS:5050\n- IPOFMESOS:5050/slaves", 
            "title": "Mesos and Zookeeper"
        }, 
        {
            "location": "/install/prereqs/#spinnaker", 
            "text": "We deploy Titus via Spinnaker to an EC2 cloud provider. Eventually we may\nrelease these pipelines, but for now we suggest direct deployments using\nthe AWS EC2 console.", 
            "title": "Spinnaker"
        }, 
        {
            "location": "/install/prereqs/#docker-registry", 
            "text": "We operate a docker registry based on Docker Distribution. We have tested with\nDockerhub and suggest this or the EC2 Container Registry Service (ECR).", 
            "title": "Docker Registry"
        }, 
        {
            "location": "/install/prereqs/#aws-configuration", 
            "text": "IAM Role and security group for Titus  TODO: specify what is required, for now tested with wide open security group\n  and  *  IAM role.   IAM Role and security group for app container  TODO: Need to specify a test sec group and IAM role", 
            "title": "AWS Configuration"
        }, 
        {
            "location": "/install/prereqs/#optional", 
            "text": "We use Cassandra as our persistence store for Titus master. For OSS, we\ncurrent suggest the in-memory store.  We have integration with Eureka to disable agents and monitor health. For now,\nthis is not part of the OSS implementation.  We write all task state updates to Elastic Search for operational insight. For\nnow, this is not part of the OSS implementation.  We use Edda to understand which ASG's are available in Titus. For now, this is\nnot part of the OSS implementation.", 
            "title": "Optional"
        }, 
        {
            "location": "/install/master/", 
            "text": "Master\n\n\nGateway\n\n\nRun as root\n\n\n\n\ninstall java8\n\n\nsudo apt-get update\n\n\nsudo apt-get install openjdk-8-jdk\n\n\nCopy titus-server-gateway/build/distribute/titus-server-gateway_\n.deb to server\n\n\nRun \ndpkg -i titus-server-gateway_\nversion\n.deb\n\n\n\n\nRun as Ubuntu user\n\n\n\n\nexport JAVA_OPTS=\u201d-Dtitus.gateway.masterIp=\nip\n -Dtitus.gateway.masterHttpPort=\nport\n\u201d\n\n\nStart server with \n./opt/titus-server-gateway/bin/titus-server-gateway | tee ~/titus.log", 
            "title": "Scheduler and Gateway"
        }, 
        {
            "location": "/install/master/#master", 
            "text": "", 
            "title": "Master"
        }, 
        {
            "location": "/install/master/#gateway", 
            "text": "Run as root   install java8  sudo apt-get update  sudo apt-get install openjdk-8-jdk  Copy titus-server-gateway/build/distribute/titus-server-gateway_ .deb to server  Run  dpkg -i titus-server-gateway_ version .deb   Run as Ubuntu user   export JAVA_OPTS=\u201d-Dtitus.gateway.masterIp= ip  -Dtitus.gateway.masterHttpPort= port \u201d  Start server with  ./opt/titus-server-gateway/bin/titus-server-gateway | tee ~/titus.log", 
            "title": "Gateway"
        }, 
        {
            "location": "/install/agent/", 
            "text": "Creating a Titus agent launch configuration and ASG\n\n\nWhen Spinnaker creates agent deployments, it creates the following user data in the launch config for an ASG. The\nagent processes depend on these being right.\n\n\nNETFLIX_ACCOUNT=\ntest\n\nNETFLIX_ACCOUNT_TYPE=\nmain\n\nNETFLIX_ENVIRONMENT=\ntest\n\nNETFLIX_APP=\ntitusagent\n\nNETFLIX_APPUSER=\ntitusagent\n\nNETFLIX_STACK=\nmainvpc\n\nNETFLIX_CLUSTER=\ntitusagent-mainvpc-m4.4xlarge.2\n\nNETFLIX_DETAIL=\nm4.4xlarge.2\n\nNETFLIX_AUTO_SCALE_GROUP=\ntitusagent-mainvpc-m4.4xlarge.2-v004\n\nNETFLIX_LAUNCH_CONFIG=\ntitusagent-mainvpc-m4.4xlarge.2-v004-07202017195940\n\nEC2_REGION=\neu-west-1\n\n\n\n\n\nUpgrade Ubuntu\n\n\nsudo su\napt-get update\napt-get upgrade\napt-get dist-upgrade\nshutdown -r now\n\n\n\n\nInstall Docker\n\n\nInstall docker as instructed \nhere\n\n\nMesos-slave\n\n\nRan mesos-slave with Docker image instead of installing natively.\n- TODO - need to do this without Docker\n- \ndocker run --rm --name mesosslave -v /apps/:/apps/ -v /etc/titus-executor/:/etc/titus-executor/ -v /var/run/docker.sock:/var/run/docker.sock --privileged --net=host -d mesosphere/mesos-slave:1.0.1-2.0.93.ubuntu1404 mesos-slave --master=zk://172.31.43.195:2181/titus/mainvpc/mesos --log_dir=/var/log/mesos/ --work_dir=/apps/mesos --logging_level=INFO --resources=\"network:1000\" --attributes=\"region:hackday;asg:titusagent-m4.xlarge;stack:hackday;zone:hackdayd;itype:m4.xlarge;cluster:titusagent-hackday;id:l-deadbeef;res:ResourceSet-ENIs-7-29\"\n\n\ntitus-executor\n\n\n\n\ndpkg -i titus-agent_0.0.1-1_all.deb\n\n\n\n\ntitus-vpc-driver\n\n\n\n\ndpkg -i --force-overwrite titus-vpc-driver_0.0.1-1_all.deb\n\n\nWe use \n--force-overwrite\n flag to ensure all files are updated.\n\n\nRun \nsudo /apps/titus-vpc-driver/bin/run\n to start the driver. Since all of the other\ncomponents are in the host network, it should be fine to run it from the host.\n\n\n\n\ntitus-metadata-service\n\n\n\n\ndpkg -i titus-metadata-service_0.0.1-1_all.deb\n\n\nRun \nsudo /apps/titus-metadata-service/bin/run\n to start the proxy", 
            "title": "Agent"
        }, 
        {
            "location": "/install/agent/#creating-a-titus-agent-launch-configuration-and-asg", 
            "text": "When Spinnaker creates agent deployments, it creates the following user data in the launch config for an ASG. The\nagent processes depend on these being right.  NETFLIX_ACCOUNT= test \nNETFLIX_ACCOUNT_TYPE= main \nNETFLIX_ENVIRONMENT= test \nNETFLIX_APP= titusagent \nNETFLIX_APPUSER= titusagent \nNETFLIX_STACK= mainvpc \nNETFLIX_CLUSTER= titusagent-mainvpc-m4.4xlarge.2 \nNETFLIX_DETAIL= m4.4xlarge.2 \nNETFLIX_AUTO_SCALE_GROUP= titusagent-mainvpc-m4.4xlarge.2-v004 \nNETFLIX_LAUNCH_CONFIG= titusagent-mainvpc-m4.4xlarge.2-v004-07202017195940 \nEC2_REGION= eu-west-1", 
            "title": "Creating a Titus agent launch configuration and ASG"
        }, 
        {
            "location": "/install/agent/#upgrade-ubuntu", 
            "text": "sudo su\napt-get update\napt-get upgrade\napt-get dist-upgrade\nshutdown -r now", 
            "title": "Upgrade Ubuntu"
        }, 
        {
            "location": "/install/agent/#install-docker", 
            "text": "Install docker as instructed  here", 
            "title": "Install Docker"
        }, 
        {
            "location": "/install/agent/#mesos-slave", 
            "text": "Ran mesos-slave with Docker image instead of installing natively.\n- TODO - need to do this without Docker\n-  docker run --rm --name mesosslave -v /apps/:/apps/ -v /etc/titus-executor/:/etc/titus-executor/ -v /var/run/docker.sock:/var/run/docker.sock --privileged --net=host -d mesosphere/mesos-slave:1.0.1-2.0.93.ubuntu1404 mesos-slave --master=zk://172.31.43.195:2181/titus/mainvpc/mesos --log_dir=/var/log/mesos/ --work_dir=/apps/mesos --logging_level=INFO --resources=\"network:1000\" --attributes=\"region:hackday;asg:titusagent-m4.xlarge;stack:hackday;zone:hackdayd;itype:m4.xlarge;cluster:titusagent-hackday;id:l-deadbeef;res:ResourceSet-ENIs-7-29\"", 
            "title": "Mesos-slave"
        }, 
        {
            "location": "/install/agent/#titus-executor", 
            "text": "dpkg -i titus-agent_0.0.1-1_all.deb", 
            "title": "titus-executor"
        }, 
        {
            "location": "/install/agent/#titus-vpc-driver", 
            "text": "dpkg -i --force-overwrite titus-vpc-driver_0.0.1-1_all.deb  We use  --force-overwrite  flag to ensure all files are updated.  Run  sudo /apps/titus-vpc-driver/bin/run  to start the driver. Since all of the other\ncomponents are in the host network, it should be fine to run it from the host.", 
            "title": "titus-vpc-driver"
        }, 
        {
            "location": "/install/agent/#titus-metadata-service", 
            "text": "dpkg -i titus-metadata-service_0.0.1-1_all.deb  Run  sudo /apps/titus-metadata-service/bin/run  to start the proxy", 
            "title": "titus-metadata-service"
        }, 
        {
            "location": "/test/batch/", 
            "text": "Testing the most basic job\n\n\nFrom the gateway node\n\n\ncurl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\n   \napplicationName\n: \nubuntu\n,\n   \nversion\n: \nlatest\n,\n   \ntype\n: \nbatch\n,\n   \nentryPoint\n: \nsleep 10\n,\n   \ninstances\n: 1,\n   \ncpu\n: 1,\n   \nmemory\n: 1024,\n   \ndisk\n: 1000,\n   \nnetworkMbps\n: 128\n }' 'http://localhost:7001/api/v2/jobs'", 
            "title": "Basic batch task"
        }, 
        {
            "location": "/test/batch/#testing-the-most-basic-job", 
            "text": "From the gateway node  curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{\n    applicationName :  ubuntu ,\n    version :  latest ,\n    type :  batch ,\n    entryPoint :  sleep 10 ,\n    instances : 1,\n    cpu : 1,\n    memory : 1024,\n    disk : 1000,\n    networkMbps : 128\n }' 'http://localhost:7001/api/v2/jobs'", 
            "title": "Testing the most basic job"
        }, 
        {
            "location": "/faq/", 
            "text": "", 
            "title": "FAQ"
        }
    ]
}